let $eb9b3d82609c297a$export$4c5dd147b21b9176=e=>{let t=L.map("map",{zoomControl:!1,scrollWheelZoom:!0,doubleClickZoom:!1,dragging:!0});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t);let o=L.icon({iconUrl:"/img/pin.png",iconSize:[32,40],iconAnchor:[16,45],popupAnchor:[0,-50]}),a=[];e.forEach(e=>{a.push([e.coordinates[1],e.coordinates[0]]),L.marker([e.coordinates[1],e.coordinates[0]],{icon:o}).addTo(t).bindPopup(`<p>Day ${e.day}: ${e.description}</p>`,{autoClose:!1,className:"mapPopup"}).on("mouseover",function(e){this.openPopup()}).on("mouseout",function(e){this.closePopup()}).openPopup()});let r=L.latLngBounds(a).pad(.5);t.fitBounds(r)},$1b898bf38035b943$export$516836c6a9dfc573=()=>{let e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},$1b898bf38035b943$export$de026b00723010c1=(e,t)=>{$1b898bf38035b943$export$516836c6a9dfc573();let o=`<div class="alert alert--${e}">${t}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",o),window.setTimeout($1b898bf38035b943$export$516836c6a9dfc573,5e3)},$c3c64160fa6c26e4$export$596d806903d1f59e=async(e,t)=>{try{let o=await axios.post("/api/v1/users/login",{email:e,password:t});"success"===o.data.status&&($1b898bf38035b943$export$de026b00723010c1("success","Logged in successfully!"),window.setTimeout(()=>window.location.href="/",500))}catch(e){$1b898bf38035b943$export$de026b00723010c1("error",e.response.data.message)}},$c3c64160fa6c26e4$export$a0973bcfe11b05c9=async()=>{try{(await axios.get("/api/v1/users/logout")).data.status="success",location.assign("/")}catch(e){$1b898bf38035b943$export$de026b00723010c1("error","Error logging out! Try again.")}},$bd6da4746eaeec83$export$8d5bdbf26681c0c2=async e=>{try{let t=await axios(`/api/v1/bookings/checkout-session/${e}`),{url:o}=t.data.session;"success"===t.data.status?window.location.href=o:$1b898bf38035b943$export$de026b00723010c1("error","Invalid session or missing URL")}catch(e){$1b898bf38035b943$export$de026b00723010c1("error","Error Checking out")}},$3ed33bdc2a0cf15d$export$f558026a994b6051=async(e,t)=>{try{let o="password"===t?"/api/v1/users/update-password":"/api/v1/users/update-user",a=await axios.patch(o,e);"success"===a.data.status&&$1b898bf38035b943$export$de026b00723010c1("success",`${t.toUpperCase()} updated successfully!`)}catch(e){$1b898bf38035b943$export$de026b00723010c1("error",e.response.data.message)}},$9abd65d1c0e6ac42$var$init=()=>{let e=document.getElementById("map"),t=document.querySelector(".user-login-form"),o=document.querySelector(".nav__el--logout"),a=document.querySelector(".form-user-data"),r=document.querySelector(".form-user-settings"),s=document.querySelector("#book-tour");e&&$eb9b3d82609c297a$export$4c5dd147b21b9176(JSON.parse(e.dataset.locations)),t&&t.addEventListener("submit",e=>{e.preventDefault(),$c3c64160fa6c26e4$export$596d806903d1f59e(document.querySelector("#email").value,document.querySelector("#password").value)}),o&&o.addEventListener("click",()=>{$c3c64160fa6c26e4$export$a0973bcfe11b05c9()}),a&&a.addEventListener("submit",async e=>{e.preventDefault();let t=new FormData;t.append("name",document.getElementById("name").value),t.append("email",document.getElementById("email").value),t.append("photo",document.getElementById("photo").files[0]),document.querySelector(".btn--save-settings").textContent="Updating...",await $3ed33bdc2a0cf15d$export$f558026a994b6051(t,"data"),document.querySelector(".btn--save-settings").textContent="Save settings"}),r&&r.addEventListener("submit",async e=>{e.preventDefault(),r.querySelector(".btn--save-password").textContent="Updating...";let t=r.querySelector("#password-current").value,o=r.querySelector("#password").value,a=r.querySelector("#password-confirm").value;await $3ed33bdc2a0cf15d$export$f558026a994b6051({passwordCurrent:t,password:o,passwordConfirm:a},"password"),r.querySelector(".btn--save-password").textContent="Save password",r.querySelector("#password-current").value="",r.querySelector("#password").value="",r.querySelector("#password-confirm").value=""}),s&&s.addEventListener("click",async e=>{e.target.textContent="Processing...";let t=e.target.dataset.tourId;await $bd6da4746eaeec83$export$8d5bdbf26681c0c2(t),e.target.textContent="Book tour now!"})};document.addEventListener("DOMContentLoaded",$9abd65d1c0e6ac42$var$init);
//# sourceMappingURL=index.js.map
